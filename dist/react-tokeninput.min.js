!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n;"undefined"!=typeof window?n=window:"undefined"!=typeof global?n=global:"undefined"!=typeof self&&(n=self),n.ReactTokenInput=e()}}(function(){return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module){var TokenInput=require("./lib/main");TokenInput.Option=require("./lib/option"),module.exports=TokenInput},{"./lib/main":4,"./lib/option":5}],2:[function(require,module){function addClass(existing,added){return existing?existing.indexOf(added)>-1?existing:existing+" "+added:added}module.exports=addClass},{}],3:[function(require,module){(function(global){function getLabel(component){return component.props.label||component.props.children}var React="undefined"!=typeof window?window.React:"undefined"!=typeof global?global.React:null,guid=0,k=function(){},addClass=require("./add-class"),ComboboxOption=require("./option"),div=React.DOM.div,span=React.DOM.span,input=React.DOM.input;module.exports=React.createClass({propTypes:{onInput:React.PropTypes.func,onSelect:React.PropTypes.func},getDefaultProps:function(){return{autocomplete:"both",onInput:k,onSelect:k,value:null}},getInitialState:function(){return{value:this.props.value,inputValue:this.findInitialInputValue(),isOpen:!1,focusedIndex:null,matchedAutocompleteOption:null,usingKeyboard:!1,activedescendant:null,listId:"ic-tokeninput-list-"+ ++guid,menu:{children:[],activedescendant:null,isEmpty:!0}}},componentWillMount:function(){this.setState({menu:this.makeMenu()})},componentWillReceiveProps:function(newProps){this.setState({menu:this.makeMenu(newProps.children)})},makeMenu:function(children){var activedescendant,isEmpty=!0;return children=children||this.props.children,React.Children.forEach(children,function(child,index){if(child.type===ComboboxOption.type){isEmpty=!1;var props=child.props;this.state.value===props.value&&(props.id=props.id||"ic-tokeninput-selected-"+ ++guid,props.isSelected=!0,activedescendant=props.id),props.onBlur=this.handleOptionBlur,props.onClick=this.selectOption.bind(this,child),props.onFocus=this.handleOptionFocus,props.onKeyDown=this.handleOptionKeyDown.bind(this,child),props.onMouseEnter=this.handleOptionMouseEnter.bind(this,index)}}.bind(this)),isEmpty&&this.hideList(),{children:children,activedescendant:activedescendant,isEmpty:isEmpty}},getClassName:function(){var className=addClass(this.props.className,"ic-tokeninput");return this.state.isOpen&&(className=addClass(className,"ic-tokeninput-is-open")),className},clearSelectedState:function(cb){this.setState({focusedIndex:null,inputValue:null,value:null,matchedAutocompleteOption:null,activedescendant:null},cb)},handleInputChange:function(){var value=this.refs.input.getDOMNode().value;this.clearSelectedState(function(){this.props.onInput(value),this.state.isOpen||this.showList()}.bind(this))},handleInputBlur:function(){var focusedAnOption=null!=this.state.focusedIndex;focusedAnOption||(this.maybeSelectAutocompletedOption(),this.hideList())},handleOptionBlur:function(){this.blurTimer=setTimeout(this.hideList,0)},handleOptionFocus:function(){clearTimeout(this.blurTimer)},handleInputKeyUp:function(event){this.state.menu.isEmpty||8===event.keyCode||!this.props.autocomplete.match(/both|inline/)},handleButtonClick:function(){this.state.isOpen?this.hideList():this.showList(),this.focusInput()},showList:function(){this.setState({isOpen:!0})},hideList:function(){this.setState({isOpen:!1})},hideOnEscape:function(event){this.hideList(),this.focusInput(),event.preventDefault()},focusInput:function(){this.refs.input.getDOMNode().focus()},selectInput:function(){this.refs.input.getDOMNode().select()},inputKeydownMap:{8:"removeLastToken",13:"selectOnEnter",27:"hideOnEscape",38:"focusPrevious",40:"focusNext"},optionKeydownMap:{13:"selectOption",27:"hideOnEscape",38:"focusPrevious",40:"focusNext"},handleKeydown:function(event){var handlerName=this.inputKeydownMap[event.keyCode];if(handlerName)return this.setState({usingKeyboard:!0}),this[handlerName].call(this,event)},handleOptionKeyDown:function(child,event){var handlerName=this.optionKeydownMap[event.keyCode];return handlerName?(event.preventDefault(),this.setState({usingKeyboard:!0}),void this[handlerName].call(this,child)):void this.selectInput()},handleOptionMouseEnter:function(index){this.state.usingKeyboard?this.setState({usingKeyboard:!1}):this.focusOptionAtIndex(index)},selectOnEnter:function(event){event.preventDefault(),this.maybeSelectAutocompletedOption()},maybeSelectAutocompletedOption:function(){this.state.matchedAutocompleteOption?this.selectOption(this.state.matchedAutocompleteOption,{focus:!1}):this.selectText()},selectOption:function(child,options){options=options||{},this.setState({matchedAutocompleteOption:null},function(){this.props.onSelect(child.props.value,child),this.hideList(),this.clearSelectedState(),options.focus!==!1&&this.selectInput()}.bind(this)),this.refs.input.getDOMNode().value=""},selectText:function(){var value=this.refs.input.getDOMNode().value;value&&(this.props.onSelect(value),this.clearSelectedState(),this.refs.input.getDOMNode().value="")},focusNext:function(event){if(event.preventDefault&&event.preventDefault(),!this.state.menu.isEmpty){var index=null==this.state.focusedIndex?0:this.state.focusedIndex+1;this.focusOptionAtIndex(index)}},removeLastToken:function(){return this.props.onRemoveLast&&!this.refs.input.getDOMNode().value&&this.props.onRemoveLast(),!0},focusPrevious:function(event){if(event.preventDefault&&event.preventDefault(),!this.state.menu.isEmpty){var last=this.props.children.length-1,index=null==this.state.focusedIndex?last:this.state.focusedIndex-1;this.focusOptionAtIndex(index)}},focusSelectedOption:function(){var selectedIndex;React.Children.forEach(this.props.children,function(child,index){child.props.value===this.state.value&&(selectedIndex=index)}.bind(this)),this.showList(),this.setState({focusedIndex:selectedIndex},this.focusOption)},findInitialInputValue:function(){var inputValue;return React.Children.forEach(this.props.children,function(child){child.props.value===this.props.value&&(inputValue=getLabel(child))}.bind(this)),inputValue},focusOptionAtIndex:function(index){if(!this.state.isOpen&&this.state.value)return this.focusSelectedOption();this.showList();var length=this.props.children.length;-1===index?index=length-1:index===length&&(index=0),this.setState({focusedIndex:index},this.focusOption)},focusOption:function(){var index=this.state.focusedIndex;this.refs.list.getDOMNode().childNodes[index].focus()},render:function(){var ariaLabel=this.props["aria-label"]||"Start typing to search. Press the down arrow to navigate results. If you don't find an acceptable option, you can enter an alternative.";return div({className:this.getClassName()},this.props.value,this.state.inputValue,input({ref:"input",autoComplete:"off",spellCheck:"false","aria-label":ariaLabel,"aria-expanded":this.state.isOpen+"","aria-haspopup":"true","aria-activedescendant":this.state.menu.activedescendant,"aria-autocomplete":"list","aria-owns":this.state.listId,id:this.props.id,className:"ic-tokeninput-input",onChange:this.handleInputChange,onBlur:this.handleInputBlur,onKeyDown:this.handleKeydown,onKeyUp:this.handleInputKeyUp,role:"combobox"}),span({"aria-hidden":"true",className:"ic-tokeninput-button",onClick:this.handleButtonClick},"▾"),div({id:this.state.listId,ref:"list",className:"ic-tokeninput-list",role:"listbox"},this.state.menu.children))}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./add-class":2,"./option":5}],4:[function(require,module){(function(global){var React="undefined"!=typeof window?window.React:"undefined"!=typeof global?global.React:null,Combobox=require("./combobox"),Token=require("./token"),ul=React.DOM.ul,li=React.DOM.li;module.exports=React.createClass({propTypes:{onInput:React.PropTypes.func,onSelect:React.PropTypes.func.isRequired,onRemove:React.PropTypes.func.isRequired,selected:React.PropTypes.array.isRequired,menuContent:React.PropTypes.any},getInitialState:function(){return{selectedToken:null}},handleClick:function(){this.refs["combo-li"].getDOMNode().querySelector("input").focus()},handleInput:function(event){this.props.onInput(event)},handleSelect:function(event){this.props.onSelect(event),this.setState({selectedToken:null})},handleRemove:function(value){this.props.onRemove(value),this.refs["combo-li"].getDOMNode().querySelector("input").focus()},handleRemoveLast:function(){this.props.onRemove(this.props.selected[this.props.selected.length-1])},render:function(){var tokens=this.props.selected.map(function(token){return Token({onRemove:this.handleRemove,value:token,name:token.name,key:token.id})}.bind(this));return ul({className:"ic-tokens flex",onClick:this.handleClick},tokens,li({className:"inline-flex",ref:"combo-li"},Combobox({id:this.props.id,"aria-label":this.props["combobox-aria-label"],onInput:this.handleInput,onSelect:this.handleSelect,onRemoveLast:this.handleRemoveLast,value:this.state.selectedToken},this.props.menuContent)))}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./combobox":3,"./token":6}],5:[function(require,module){(function(global){var React="undefined"!=typeof window?window.React:"undefined"!=typeof global?global.React:null,addClass=require("./add-class"),div=React.DOM.div;module.exports=React.createClass({propTypes:{value:React.PropTypes.any.isRequired,label:React.PropTypes.string},getDefaultProps:function(){return{role:"option",tabIndex:"-1",className:"ic-tokeninput-option",isSelected:!1}},render:function(){var props=this.props;return props.isSelected&&(props.className=addClass(props.className,"ic-tokeninput-selected"),props.ariaSelected=!0),div(props)}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./add-class":2}],6:[function(require,module){(function(global){var React="undefined"!=typeof window?window.React:"undefined"!=typeof global?global.React:null,span=React.DOM.span,li=React.DOM.li;module.exports=React.createClass({handleClick:function(){this.props.onRemove(this.props.value)},handleKeyDown:function(key){var enterKey=13;key.keyCode===enterKey&&this.props.onRemove(this.props.value)},render:function(){return li({className:"ic-token inline-flex"},span({role:"button",onClick:this.handleClick,onKeyDown:this.handleKeyDown,"aria-label":"Remove '"+this.props.name+"'",className:"ic-token-delete-button",tabIndex:0},"✕"),span({className:"ic-token-label"},this.props.name))}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1])(1)});